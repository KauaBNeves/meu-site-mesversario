<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Feliz‚ÄØM√™svers√°rio</title>
<style>
  body {
    margin: 0; padding: 0;
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(270deg,#f6d1e9,#b2c9f7);
    background-size: 800% 800%;
    animation: bgShift 25s ease infinite;
    overflow-x: hidden;
    position: relative;
  }
  @keyframes bgShift {
    0% { background-position: 0 50% }
    50% { background-position: 100% 50% }
    100% { background-position: 0 50% }
  }

  /* Camada para emojis caindo */
  .falling-emojis {
    pointer-events: none; /* para n√£o atrapalhar cliques */
    position: fixed;
    inset: 0;
    z-index: 0;
    overflow: hidden;
  }
  /* Cada emoji */
  .falling-emojis span {
    position: absolute;
    top: -2em;
    font-size: 1.5em;
    opacity: 0.8;
    animation-name: fall;
    animation-timing-function: linear;
    animation-iteration-count: infinite;
    user-select: none;
  }
  /* Anima√ß√£o de queda */
  @keyframes fall {
    0% {
      transform: translateY(-2em) rotate(0deg);
      opacity: 0.8;
    }
    100% {
      transform: translateY(110vh) rotate(360deg);
      opacity: 0;
    }
  }

  /* Varia√ß√µes de tempo, posi√ß√£o, tamanho, dura√ß√£o */
  .falling-emojis span:nth-child(1) {
    left: 5%; animation-duration: 15s; animation-delay: 0s; font-size: 2em;
  }
  .falling-emojis span:nth-child(2) {
    left: 15%; animation-duration: 12s; animation-delay: 2s; font-size: 1.5em;
  }
  .falling-emojis span:nth-child(3) {
    left: 25%; animation-duration: 18s; animation-delay: 4s; font-size: 1.8em;
  }
  .falling-emojis span:nth-child(4) {
    left: 35%; animation-duration: 14s; animation-delay: 1s; font-size: 1.6em;
  }
  .falling-emojis span:nth-child(5) {
    left: 45%; animation-duration: 16s; animation-delay: 3.5s; font-size: 2em;
  }
  .falling-emojis span:nth-child(6) {
    left: 55%; animation-duration: 13s; animation-delay: 5s; font-size: 1.7em;
  }
  .falling-emojis span:nth-child(7) {
    left: 65%; animation-duration: 17s; animation-delay: 2.5s; font-size: 1.9em;
  }
  .falling-emojis span:nth-child(8) {
    left: 75%; animation-duration: 15s; animation-delay: 0.5s; font-size: 1.4em;
  }
  .falling-emojis span:nth-child(9) {
    left: 85%; animation-duration: 16s; animation-delay: 4.5s; font-size: 2.1em;
  }
  .falling-emojis span:nth-child(10) {
    left: 95%; animation-duration: 14s; animation-delay: 3s; font-size: 1.6em;
  }
  .falling-emojis span:nth-child(11) {
    left: 10%; animation-duration: 15s; animation-delay: 1.8s; font-size: 1.7em;
  }
  .falling-emojis span:nth-child(12) {
    left: 20%; animation-duration: 13s; animation-delay: 2.2s; font-size: 1.8em;
  }
  .falling-emojis span:nth-child(13) {
    left: 30%; animation-duration: 17s; animation-delay: 4.2s; font-size: 2em;
  }
  .falling-emojis span:nth-child(14) {
    left: 40%; animation-duration: 16s; animation-delay: 0.8s; font-size: 1.5em;
  }
  .falling-emojis span:nth-child(15) {
    left: 50%; animation-duration: 18s; animation-delay: 3.1s; font-size: 1.9em;
  }
  .falling-emojis span:nth-child(16) {
    left: 60%; animation-duration: 15s; animation-delay: 1.3s; font-size: 1.4em;
  }
  .falling-emojis span:nth-child(17) {
    left: 70%; animation-duration: 14s; animation-delay: 2.7s; font-size: 2em;
  }
  .falling-emojis span:nth-child(18) {
    left: 80%; animation-duration: 16s; animation-delay: 0.3s; font-size: 1.6em;
  }
  .falling-emojis span:nth-child(19) {
    left: 90%; animation-duration: 13s; animation-delay: 4.9s; font-size: 1.7em;
  }
  .falling-emojis span:nth-child(20) {
    left: 100%; animation-duration: 15s; animation-delay: 2.8s; font-size: 1.5em;
  }

  /* container e conte√∫do com z-index maior para ficar na frente */
  .container {
    position: relative;
    max-width: 700px;
    margin: 30px auto;
    background: rgba(255,255,255,0.7); /* Aqui a transpar√™ncia para mostrar o fundo */
    border-radius: 20px;
    padding: 30px 20px;
    text-align: center;
    box-shadow: 0 0 15px rgba(0,0,0,.1);
    z-index: 1;
  }

  h1, h2 { color: #d63384; }

  button {
    padding: 12px 24px;
    font-size: 1em;
    border: none;
    border-radius: 10px;
    margin-top: 20px;
    background: #0077cc;
    color: #fff;
    cursor: pointer;
  }
  button:hover { background: #005fa3; }

  .rosa-container {
    position: relative;
    width: 200px;
    height: 200px;
    margin: 30px auto;
  }

  .petala {
    position: absolute; inset: 0;
    background: url('rosa.png') center/cover;
    opacity: 0; transform: scale(0.2);
    animation: abrir 1s forwards;
  }
  .petala:nth-child(1) { animation-delay: .2s }
  .petala:nth-child(2) { animation-delay: .6s }
  .petala:nth-child(3) { animation-delay: 1s }
  .petala:nth-child(4) { animation-delay: 1.4s }

  @keyframes abrir {
    to { opacity: 1; transform: scale(1); }
  }

  .fotos {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    justify-content: center;
    margin-top: 20px;
  }
  .fotos img {
    width: 45%;
    max-width: 200px;
    border-radius: 12px;
    box-shadow: 0 4px 8px rgba(0,0,0,.15);
  }

  #puzzle {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 4px;
    width: 320px;
    margin: 20px auto 0;
  }
  #puzzle img {
    width: 100%;
    border-radius: 6px;
    cursor: pointer;
    user-select: none;
    box-shadow: 0 2px 4px rgba(0,0,0,.15);
  }

  #conteudo, #quebra {
    display: none;
  }

  /* ‚Äî‚Äî‚Äî overlay final ‚Äî‚Äî‚Äî */
#finalOverlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(255, 255, 255, 0.8); /* mais transparente para mostrar fundo */
  z-index: 9999;
  text-align: center;
  padding-top: 100px;
}


  #finalOverlay h1 {
    color: #d63384;
    font-size: 2em;
    margin-bottom: 30px;
  }

  .rosa-nova-final {
    width: 150px;
    animation: aparecer 1.5s ease-out forwards;
    opacity: 0;
    transform: scale(0.6);
    margin-top: 20px;
  }

  @keyframes aparecer {
    to {
      opacity: 1;
      transform: scale(1);
    }
  }
</style>
</head>
<body>

<!-- Fundo animado com emojis -->
<div class="falling-emojis" aria-hidden="true">
  <span>‚ù§Ô∏è</span>
  <span>üåπ</span>
  <span>‚ù§Ô∏è</span>
  <span>üåπ</span>
  <span>‚ù§Ô∏è</span>
  <span>üåπ</span>
  <span>‚ù§Ô∏è</span>
  <span>üåπ</span>
  <span>‚ù§Ô∏è</span>
  <span>üåπ</span>
  <span>‚ù§Ô∏è</span>
  <span>üåπ</span>
  <span>‚ù§Ô∏è</span>
  <span>üåπ</span>
  <span>‚ù§Ô∏è</span>
  <span>üåπ</span>
  <span>‚ù§Ô∏è</span>
  <span>üåπ</span>
  <span>‚ù§Ô∏è</span>
  <span>üåπ</span>
</div>

<!-- üéµ M√∫sica de fundo -->
<audio id="musica" src="musica.mp3" autoplay loop muted></audio>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const audio = document.getElementById('musica');
    function iniciarMusica() {
      audio.muted = false;
      audio.play().catch(() => {});
      document.removeEventListener('click', iniciarMusica);
    }
    document.addEventListener('click', iniciarMusica);
  });
</script>

<script>
window.addEventListener('click', () => {
  const audio = document.getElementById('musica');
  if (audio && audio.paused) {
    audio.play().catch(() => {});
  }
}, { once: true });
</script>

<!-- PRIMEIRA ABA -->
<div class="container" id="carta">
  <h2>Para minha rainha e m√£e dos meus filhos</h2>
  <p>
    Amor da minha vida,<br><br>
    Voc√™ entrou na minha vida como a rosa mais rara do jardim. Desde ent√£o, tudo floresceu.<br>
    Obrigado por cada sorriso, cada abra√ßo, cada detalhe.<br><br>
    Hoje celebro n√£o s√≥ nosso tempo juntos, mas tudo que ainda vamos viver.<br>
    Eu te amo infinitamente! üíô<br><br>
    ‚Äî‚ÄØPiculicutico
  </p>
  <button onclick="abrirPrimeira()">Abrir minha homenagem üåπ</button>
</div>

<!-- SEGUNDA ABA -->
<div class="container" id="conteudo">
  <h1>üåπ Feliz 1‚ÄØano e 1‚ÄØm√™s amor da minha vida üåπ</h1>
  <p>Eu n√£o podia deixar de te dar sua flor mesmo virtualmente. üíô</p>

  <div class="rosa-container">
    <div class="petala"></div>
    <div class="petala"></div>
    <div class="petala"></div>
    <div class="petala"></div>
  </div>

  <div class="fotos">
    <img src="foto1.jpg" alt="Foto 1">
    <img src="foto2.jpg" alt="Foto 2">
    <img src="foto3.jpg" alt="Foto 3">
    <img src="foto4.jpg" alt="Foto 4">
  </div>

  <button onclick="abrirPuzzle()">Ver nova homenagem üíå</button>
</div>

<!-- TERCEIRA ABA -->
<div class="container" id="quebra">
¬† <h1>üß© Nossa lembran√ßa em peda√ßos que se completam üß©</h1>
¬† <p>Monte nosso momento especial!</p>
¬† <div id="puzzle"></div>
    <button onclick="abrirLinhaDoTempo()">Descobrir o pr√≥ximo cap√≠tulo! ‚ù§Ô∏è </button>
</div>

<!-- OVERLAY FINAL COM ROSA VERMELHA -->
<div id="finalOverlay">
  <h1>üéâ Feliz 1 ano desse pedido mais que perfeito que fizeram minhas pernas se tremerem meu sorriso se abrir e meu cora√ß√£o explodir amor da minha vida.Eu te amo infinitamente ‚ù§Ô∏è</h1>
  <img src="rosa-nova.png" alt="Rosa vermelha" class="rosa-nova-final">
</div>

<script>
function abrirPrimeira() {
  document.getElementById('carta').style.display = 'none';
  document.getElementById('conteudo').style.display = 'block';
}

function abrirPuzzle() {
  document.getElementById('conteudo').style.display = 'none';
  document.getElementById('quebra').style.display = 'block';
  if (!puzzleConstruido) montarQuebraCabeca();
}

let puzzleConstruido = false;

function montarQuebraCabeca() {
  const grid = document.getElementById("puzzle");
  const imgSrc = "foto3.jpg";
  const rows = 3, cols = 4;
  const pieceW = 320 / cols, pieceH = 240 / rows;
  const canvas = document.createElement("canvas");
  canvas.width = pieceW;
  canvas.height = pieceH;
  const ctx = canvas.getContext("2d");
  const base = new Image();
  base.src = imgSrc;

  base.onload = () => {
    const aspectRatio = base.width / base.height;
    const targetRatio = 320 / 240;

    let sx = 0, sy = 0, sw = base.width, sh = base.height;
    if (aspectRatio > targetRatio) {
      sw = base.height * targetRatio;
      sx = (base.width - sw) / 2;
    } else {
      sh = base.width / targetRatio;
      sy = (base.height - sh) / 2;
    }

    const pieces = [];

    for (let y = 0; y < rows; y++) {
      for (let x = 0; x < cols; x++) {
        ctx.clearRect(0, 0, pieceW, pieceH);
        ctx.drawImage(
          base,
          sx + x * (sw / cols), sy + y * (sh / rows),
          sw / cols, sh / rows,
          0, 0, pieceW, pieceH
        );
        pieces.push(canvas.toDataURL());
      }
    }

    const order = [...pieces.keys()].sort(() => Math.random() - 0.5);
    order.forEach((pieceId, gridIndex) => {
      const el = document.createElement("img");
      el.src = pieces[pieceId];
      el.dataset.correct = gridIndex;
      el.dataset.current = pieceId;
      grid.appendChild(el);
    });

    ativarTroca();
    puzzleConstruido = true;
  };
}

function ativarTroca() {
  let primeira = null;
  document.querySelectorAll('#puzzle img').forEach(img => {
    img.addEventListener('click', () => {
      if (!primeira) {
        primeira = img;
        primeira.style.outline = '3px solid #0077cc';
        return;
      }
      const segunda = img;
      [primeira.src, segunda.src] = [segunda.src, primeira.src];
      [primeira.dataset.current, segunda.dataset.current] = [segunda.dataset.current, primeira.dataset.current];
      primeira.style.outline = 'none';
      primeira = null;
      verificarConcluido();
    });
  });
}

function verificarConcluido() {
  const certo = [...document.querySelectorAll('#puzzle img')]
    .every(el => el.dataset.current === el.dataset.correct);
  if (certo) {
    mostrarMensagemFinal();
  }
}

function mostrarMensagemFinal() {
  document.getElementById("finalOverlay").style.display = "block";
}
function abrirLinhaDoTempo() {
  window.open('linha-do-tempo.html', '_blank'); // Abre em uma nova aba
}

// ... (o restante do seu JavaScript existente, incluindo as fun√ß√µes do quebra-cabe√ßa)

function mostrarMensagemFinal() {
  document.getElementById("finalOverlay").style.display = "block";
  // Opcional: Voc√™ pode esconder o bot√£o "Descobrir o pr√≥ximo cap√≠tulo!" aqui se ele estiver vis√≠vel antes.
}
</script>
</body>
</html>
